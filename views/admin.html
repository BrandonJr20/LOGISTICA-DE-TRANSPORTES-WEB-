<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMINISTRADOR VIEW</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="public/css/adminEstilos.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
</head>

<body>

    <button class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
    </button>

    <aside id="sidebar">
        <div class="perfil">
            <img src="/views/public/images/fondo.png" alt="" width="100px" height="100px">
            <h3>nombre usuario</h3>
        </div>
        <ul>
            <li><a href="#principal">Inicio</a></li>
            <li><a href="#usuarios">Usuarios</a></li>
            <li><a href="#conductores">Conductores</a></li>
            <li><a href="#unidades">Unidades</a></li>
            <li><a href="#asignaciones">Asignaciones</a></li>
            <li><a href="#mantenimientos">Mantenimientos</a></li>
            <li><a href="#inventarios">Inventarios</a></li>
            <li><a href="#movimientos-inventario">Movimientos</a></li>
            <li><a href="#insumos-mantenimiento">Insumos por mantenimiento</a></li>
            <li><a href="#alertas-stock">Alertas por Stock</a></li>
            <li><a href="#bonificaciones">Bonificaciones</a></li>
            <li><a href="#reportes">Reportes</a></li>
        </ul>
    </aside>
    <main>
        <!-- SECCION CON CARTAS DE ENLACE PARA PESTANA PRINCIPAL -->
        <section class="principal" id="principal">
            <a href="#usuarios">
                <cards>
                    <i class="fas fa-user"></i>
                    <h3>Usuarios</h3>
                </cards>
            </a>
            <a href="#conductores">
                <cards>
                    <i class="fas fa-c"></i>
                    <h3>Conductores</h3>
                </cards>
            </a>
            <a href="#unidades">
                <cards>
                    <i class="fas fa-car"></i>
                    <h3>Vehículos</h3>
                </cards>
            </a>
            <a href="#asignaciones">
                <cards>
                    <i class="fas fa-clipboard-list"></i>
                    <h3>Asignaciones</h3>
                </cards>
            </a>
            <a href="#mantenimientos">
                <cards>
                    <i class="fas fa-wrench"></i>
                    <h3>Mantenimientos</h3>
                </cards>
            </a>
            <a href="#inventarios">
                <cards>
                    <i class="fas fa-boxes"></i>
                    <h3>Inventarios</h3>
                </cards>
            </a>

            <a href="#movimientos-inventario">
                <cards>
                    <i class="fas fa-people-arrows"></i>
                    <h3>Movimientos</h3>
                </cards>
            </a>

            <a href="#insumos-mantenimiento">
                <cards>
                    <i class="fas fa-tools"></i>
                    <h3>Insumos por mantenimiento</h3>
                </cards>
            </a>

            <a href="#alertas-stock">
                <cards>
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>Alertas por Stock</h3>
                </cards>
            </a>

            <a href="#bonificaciones">
                <cards>
                    <i class="fas fa-gift"></i>
                    <h3>Bonificaciones</h3>
                </cards>
            </a>
            <a href="reportes">
                <cards>
                    <i class="fas fa-chart-bar"></i>
                    <h3>Reportes</h3>
                </cards>
            </a>
            <a href="#cerrarSesion">
                <cards>
                    <i class="fas fa-sign-out-alt"></i>
                    <h3>Cerrar sesión</h3>
                </cards>
            </a>
        </section>

        <!-- SECCION DE USUARIOS -->
        <section id="usuarios">
            <!-- Formulario de Registro/Edición -->
            <dialog id="gestionUsuarios" class="modal">
                <form id="formUsuario">
                    <h2>Gestión de Usuarios</h2>
                    <input type="hidden" id="id_usuario">

                    <div>
                        <label for="nombre_usuario">Nombre de Usuario:</label>
                        <input type="text" id="nombre_usuario" name="nombre_usuario" required>
                    </div>

                    <div>
                        <label for="correo">Correo Electrónico:</label>
                        <input type="email" id="correo" name="correo" required>
                    </div>

                    <div>
                        <label for="contrasena">Contraseña:</label>
                        <input type="text" id="contrasena" name="contrasena" required>
                    </div>

                    <div>
                        <label for="rol">Rol:</label>
                        <select id="rol" name="rol" required>
                            <option value="">Selecciona un rol</option>
                            <option value="admin">Administrador</option>
                            <option value="conductor">Conductor</option>
                        </select>
                    </div>

                    <div>
                        <label for="activo">Activo:</label>
                        <select id="activo" name="activo" required>
                            <option value="1">Habilitado</option>
                            <option value="0">Inhabilitado</option>
                        </select>
                    </div>

                    <div>
                        <button type="submit">Guardar Usuario</button>
                        <button type="reset" class="btnCancelar">Cancelar</button>
                    </div>

                </form>
            </dialog>
            <button id="modalUsuarios" class="btnAbrirModal" data-tipo="usuarios">Registrar usuario</button>

            <!-- Tabla de Usuarios -->
            <div class="table-container">
                <table id="tablaUsuarios">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Correo</th>
                            <th>Rol</th>
                            <th>Activo</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Llamo al api, consulta todos los usuarios con sus respectivos campos -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- SECCION DE CONDUCTORES -->
        <section id="conductores" class="modulo">

            <!-- Formulario para crear/editar -->
            <dialog id="gestionConductores" class="modal">
                <form id="formConductor">
                    <h2>Gestión de Conductores</h2>
                    <input type="hidden" id="id_conductor" name="id_conductor" />
                    <div>
                        <label for="id_usuario_conductor">ID Usuario:</label>
                        <input type="text" id="id_usuario_conductor" name="id_usuario" required />
                    </div>

                    <div>
                        <label for="nombre_completo">Nombre Completo:</label>
                        <input type="text" id="nombre_completo" name="nombre_completo" maxlength="100" required />
                    </div>

                    <div>
                        <label for="dui">DUI:</label>
                        <input type="text" id="dui" name="dui" maxlength="20" required />
                    </div>

                    <div>
                        <label for="licencia">Licencia:</label>
                        <input type="text" id="licencia" name="licencia" maxlength="20" required />
                    </div>

                    <div>
                        <label for="telefono">Teléfono:</label>
                        <input type="text" id="telefono" name="telefono" maxlength="20" required />
                    </div>

                    <div>
                        <label for="direccion">Dirección:</label>
                        <textarea id="direccion" name="direccion" rows="3" required></textarea>
                    </div>

                    <div>
                        <label for="fecha_ingreso">Fecha de Ingreso:</label>
                        <input type="date" id="fecha_ingreso" name="fecha_ingreso" />
                    </div>

                    <div>
                        <label for="activo_conductor">Activo:</label>
                        <select id="activo_conductor" name="activo_conductor" required>
                            <option value="1">Habilitado</option>
                            <option value="0">Inhabilitado</option>
                        </select>
                    </div>

                    <div>
                        <button type="submit">Guardar</button>
                        <button type="reset" class="btnCancelar">Cancelar</button>
                    </div>
                </form>
            </dialog>
            <button id="modalConductores" class="btnAbrirModal" data-tipo="conductores">Registrar conductor</button>

            <!-- Tabla para mostrar conductores -->
            <div class="table-container">
                <table id="tablaConductores">
                    <thead>
                        <tr>
                            <!-- <th>ID</th> -->
                            <!-- <th>ID Usuario</th>  -->
                            <th>Nombre Completo</th>
                            <th>DUI</th>
                            <th>Licencia</th>
                            <th>Teléfono</th>
                            <th>Dirección</th>
                            <th>Fecha Ingreso</th>
                            <th>Activo</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Aquí se insertarán las filas dinámicamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- SECCION DE UNIDADES -->
        <section id="unidades">

            <!-- Formulario para editar/crear unidades-->
            <dialog id="gestionUnidades" class="modal">
                <form id="formVehiculo">
                    <h2>Gestión de Unidades</h2>
                    <input type="hidden" id="id_unidad" />

                    <div>
                        <label for="placa">Placa:</label>
                        <input type="text" id="placa" required />
                    </div>

                    <div>
                        <label for="marca">Marca:</label>
                        <input type="text" id="marca" required />
                    </div>

                    <div>
                        <label for="modelo">Modelo:</label>
                        <input type="text" id="modelo" required />
                    </div>

                    <div>
                        <label for="anio">Año:</label>
                        <input type="number" id="anio" required />
                    </div>

                    <div>
                        <label for="kilometraje">Kilometraje:</label>
                        <input type="number" id="kilometraje" required />
                    </div>

                    <div>
                        <label for="fecha_adquisicion">Fecha de Adquisición:</label>
                        <input type="date" id="fecha_adquisicion" required />
                    </div>

                    <div>
                        <label for="tipoUnidad">Tipo de Unidad:</label>
                        <select id="tipoUnidad" required>
                            <option value="">Seleccione</option>
                            <option value="B">Bus</option>
                            <option value="C">Camión</option>
                            <option value="A">Automóvil</option>
                            <option value="M">Motocicleta</option>
                        </select>
                    </div>

                    <!-- Solo visible al editar -->
                    <div>
                        <label for="estado">Estado:</label>
                        <select id="estado_vehiculo">
                            <option value="operativo">Operativo</option>
                            <option value="en_mantenimiento">En mantenimiento</option>
                            <option value="fuera_servicio">De baja</option>
                        </select>
                    </div>

                    <div>
                        <button type="submit">Guardar</button>
                        <button type="reset" class="btnCancelar">Cancelar</button>
                    </div>
                </form>
            </dialog>
            <button id="modalUnidades" class="btnAbrirModal" data-tipo="unidades">Registrar unidades</button>

            <!-- Tabla -->
            <div class="table-container">
                <table id="tablaVehiculos">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Placa</th>
                            <th>Marca</th>
                            <th>Modelo</th>
                            <th>Año</th>
                            <th>Kilometraje</th>
                            <th>Fecha Adquisición</th>
                            <th>Tipo</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- SECCION DE ASIGNACIONES  -->
        <section id="asignaciones">

            <!-- Formulario para asignar unidad -->
            <dialog id="gestionAsignaciones" class="modal">
                <form id="formAsignacion">
                    <h2>Asignaciones</h2>
                    <label for="id_conductor">Conductor:</label>
                    <select id="id_conductor_asignacion" required></select>

                    <label for="id_unidad">Unidad:</label>
                    <select id="id_unidad_asignacion" required></select>

                    <label for="fecha_inicio">Fecha de Inicio:</label>
                    <input type="date" id="fecha_inicio" required>

                    <button type="submit">Asignar Unidad</button>
                    <button type="reset" class="btnCancelar">Cancelar</button>
                </form>
            </dialog>
            <button id="modalAsignaciones" class="btnAbrirModal" data-tipo="asignaciones">Registrar asignacion</button>

            <div class="table-container">
                <table id="tablaActivas">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Conductor</th>
                            <th>Unidad</th>
                            <th>Inicio</th>
                            <th>Fin</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div class="table-container">
                <table id="tablaHistorial">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Conductor</th>
                            <th>Unidad</th>
                            <th>Inicio</th>
                            <th>Accion</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- SESCCION DE MANTENIMIENTOS -->
        <section id="mantenimientos">
            <h2>Gestión de Mantenimientos</h2>

            <div class="formularios-container">
                <!-- Formulario Asignar Mantenimiento -->
                <div>
                    <form id="formAsignarMantenimiento">
                        <h3 style="text-align: center;">Asignar Mantenimiento</h3>

                        <div>
                            <label for="id_unidad_mantenimiento">Unidad:</label>
                            <select id="id_unidad_mantenimiento" name="id_unidad" required>
                                <option value="">Seleccione</option>
                            </select>
                        </div>

                        <div>
                            <label for="id_tipomantenimiento">Tipo de Mantenimiento:</label>
                            <select id="id_tipomantenimiento" name="id_tipomantenimiento" required>
                                <option value="">Seleccione</option>
                            </select>
                        </div>

                        <div>
                            <label for="descripcion">Descripción:</label>
                            <textarea id="descripcion" name="descripcion" rows="3"></textarea>
                        </div>

                        <div>
                            <label for="kilometraje_mantenimiento">Kilometraje:</label>
                            <input type="number" id="kilometraje_mantenimiento" name="kilometraje" required>
                        </div>

                        <div>
                            <button type="submit">Asignar</button>
                            <button type="reset" class="btnCancelar">Cancelar</button>
                        </div>
                    </form>
                </div>

                <!-- Formulario Finalizar Mantenimiento -->
                <div>
                    <form id="formFinalizarMantenimiento">
                        <h3 style="text-align: center;">Finalizar Mantenimiento</h3>

                        <label for="id_unidad_finalizar">Unidad:</label>
                        <select id="id_unidad_finalizar" name="unidadFinalizar" required>
                            <option value="">Seleccione</option>
                        </select>

                        <label for="costo">Costo:</label>
                        <input type="number" id="costo_reparacion" name="costo" step="0.01" readonly>

                        <button type="submit">Finalizar</button>
                        <button type="reset" class="btnCancelar">Cancelar</button>
                    </form>
                </div>
            </div>

            <!-- Tabla Historial de Mantenimientos -->
            <div class="table-container">
                <table id="tablaHistorial_Mant">
                    <thead>
                        <tr>
                            <th>Unidad</th>
                            <th>Tipo</th>
                            <th>Descripción</th>
                            <th>Kilometraje</th>
                            <th>Inicio</th>
                            <th>Fin</th>
                            <th>Costo</th>
                            <th>Id Insumos</th>
                            <th>Descripcion insumos</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- SECCIÓN DE INVENTARIOS -->
        <section id="inventarios">
            <h2>Gestión de Inventarios</h2>

            <!-- Formulario Agregar Productos -->
            <dialog id="gestionInventario" class="modal">
                <form id="formInventarios">
                    <h2>Registrar producto</h2>
                    <div>
                        <label for="nombre_insumo">Nombre:</label>
                        <input type="text" id="nombre_insumo" name="nombre_insumo" required>
                    </div>

                    <div>
                        <label for="tipo_producto">Tipo:</label>
                        <select name="tipo_producto" id="tipo_producto" required>
                            <option value="">Seleccione</option>
                        </select>
                    </div>

                    <div>
                        <label for="descripcion_producto">Descripción:</label>
                        <textarea id="descripcion_producto" name="descripcion_producto" rows="3"></textarea>
                    </div>

                    <div>
                        <label for="stock_actual">Stock Actual:</label>
                        <input type="number" id="stock_actual" name="stock_actual" required min="0">
                    </div>

                    <div>
                        <label for="stock_minimo">Stock Mínimo:</label>
                        <input type="number" id="stock_minimo" name="stock_minimo" required min="0">
                    </div>

                    <div>
                        <label for="costo">Costo:</label>
                        <input type="number" id="costo" name="costo" step="0.01" required>
                    </div>

                    <div>
                        <label for="proveedor">Proveedor:</label>
                        <input type="text" id="proveedor" name="proveedor" required>
                    </div>

                    <div>
                        <button type="submit">Agregar Producto</button>
                        <button type="reset" class="btnCancelar">Cancelar</button>
                    </div>
                </form>
            </dialog>
            <button id="modalInventario" class="btnAbrirModal" data-tipo="inventario">Registrar inventario</button>

            <!-- Tabla de Inventarios -->
            <div class="table-container">
                <table id="tablaInventario">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Tipo</th>
                            <th>Descripción</th>
                            <th>Stock Actual</th>
                            <th>Stock Mínimo</th>
                            <th>Costo unitario</th>
                            <th>Costo Total</th>
                            <th>Proveedor</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- SECCIÓN DE MOVIMIENTOS DE INVENTARIO -->
        <section id="movimientos-inventario">
            <!-- Formulario Registrar Movimiento -->
            <dialog id="gestionMovimientos" class="modal">
                <form id="formMovimientoInventario">
                    <h3>Registrar Movimiento</h3>

                    <div>
                        <label for="producto_movimiento">Producto/Insumo:</label>
                        <select id="producto_movimiento" name="id_insumo" required>
                            <option value="">Seleccione</option>
                        </select>
                    </div>

                    <div>
                        <label for="tipo_movimiento">Tipo de Movimiento:</label>
                        <select id="tipo_movimiento" name="tipo_movimiento" required>
                            <option value="">Seleccione</option>
                            <option value="ENTRADA">Entrada</option>
                            <option value="SALIDA">Salida</option>
                        </select>
                    </div>

                    <div>
                        <label for="cantidad_movimiento">Cantidad:</label>
                        <input type="number" id="cantidad_movimiento" name="cantidad" required min="1">
                    </div>

                    <div>
                        <label for="descripcion_movimiento">Descripción:</label>
                        <textarea id="descripcion_movimiento" name="descripcion" rows="3"></textarea>
                    </div>

                    <div>
                        <label for="responsable_movimiento">Responsable:</label>
                        <input type="text" id="responsable_movimiento" name="responsable" required readonly>
                    </div>

                    <div>
                        <button type="submit">Registrar Movimiento</button>
                        <button type="reset" class="btnCancelar">Cancelar</button>
                    </div>
                </form>
            </dialog>
            <button id="modalMovimientos" class="btnAbrirModal" data-tipo="movimientos">Registrar movimientos</button>

            <!-- Tabla Historial de Movimientos -->
            <div class="table-container">
                <table id="tablaMovimientos">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Producto</th>
                            <th>Tipo</th>
                            <th>Cantidad</th>
                            <th>Fecha</th>
                            <th>Descripción</th>
                            <th>Responsable</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- SECCIÓN DE ASIGNACIÓN DE INSUMOS A MANTENIMIENTOS -->
        <section id="insumos-mantenimiento">

            <!-- Formulario Asignar Insumos -->
            <dialog id="gestionInsumos" class="modal">
                <form id="formAsignarInsumos">
                    <h3>Asignar Insumos al Mantenimiento</h3>

                    <div>
                        <label for="id_mantenimiento_insumo">Mantenimiento Activo:</label>
                        <select id="id_mantenimiento_insumo" name="id_mantenimiento">
                            <option value="">Seleccione</option>
                        </select>
                    </div>

                    <!-- se carga con js -->
                    <!-- <label for="id_insumo_asignar">Insumo:</label>
                <select id="id_insumo_asignar" name="id_insumo" required>
                    <option value="">Seleccione</option>
                </select>

                <label for="cantidad_usada">Cantidad Usada:</label>
                <input type="number" id="cantidad_usada" name="cantidad_usada" required min="1"> -->

                    <h4>Insumos a Utilizar</h4>
                    <div id="contenedor-insumos">
                        <!-- Los insumos se agregan dinámicamente aquí -->
                    </div>

                    <div>
                        <button type="button" id="btnAgregarInsumo">+ Agregar Insumo</button>
                        <button type="submit">Asignar Insumo</button>
                        <button type="reset" class="btnCancelar">Cancelar</button>
                    </div>
                </form>
            </dialog>
            <button id="modalInsumo" class="btnAbrirModal" data-tipo="insumos">Registrar Insumos</button>

            <div class="table-container">
                <table id="tablaInsumosMantenimiento">
                    <thead>
                        <tr>
                            <th>Id mantenimiento</th>
                            <th>Id unidad</th>
                            <th>placa</th>
                            <th>Unidad</th>
                            <th>Tipo Mantenimiento</th>
                            <th>Id insumo</th>
                            <th>Nombre insumo</th>
                            <th>Tipo producto</th>
                            <th>Cantidad Usada</th>
                            <th>Descripcion</th>
                            <th>Fecha Inicio</th>
                            <th>Fecha Fin</th>
                            <th>Kilometraje</th>
                            <th>Costo</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- SECCIÓN DE ALERTAS DE STOCK -->
        <section id="alertas-stock">
            <div class="table-container">
                <h2>Alertas de Stock Bajo</h2>
                <table id="tablaAlertasStock">
                    <thead>
                        <tr>
                            <th>Producto</th>
                            <th>Stock Actual</th>
                            <th>Stock Mínimo</th>
                            <th>Diferencia</th>
                            <th>Proveedor</th>
                            <th>Tipo Producto</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <section id="bonificaciones">
            <h2>Bonificaciones</h2>

            <h3>PROXIMAMENTE</h3>
        </section>
        <section id="reportes">
            <h2>Reportes</h2>

            <h3>PROXIMAMENTE</h3>
        </section>
        <section id="cerrarSesionBtn">
        </section>


        <dialog class="alertas" id="dialogo-alerta">
            <div class="contenido-alerta">
                <span class="cerrar-alerta">&times;</span>
                <p id="mensaje-alerta"></p>
                <div class="acciones-alerta">
                    <button id="btnCancelarDialogo" class="btnCancelar">Cancelar</button>
                    <button id="btnAceptarDialogo" class="btnAceptar">Aceptar</button>
                </div>
            </div>
        </dialog>

    </main>

    <script src="public/js/administradorView.js"></script>
    <script src="public/js/vehiculosAdministrador.js"></script>
    <script src="public/js/conductoresAdministrador.js"></script>
    <script src="public/js/asignacionesAdministrador.js"></script>
    <script src="public/js/mantenimientoAdministrador.js"></script>
    <script src="public/js/usuariosAdministrador.js"></script>
    <script src='public/js/inventarioAdministrador.js'></script>
    <script src="public/js/movimientoAdministrador.js"></script>
    <script src="public/js/insumoMantAdministrador.js"></script>
    <script src="public/js/dialogos.js"></script>
    <script src="public/js/formatearFecha.js"></script>
    <script src="public/js/formularios.js"></script>
</body>

</html>